name: Get changed directories
description: "Get a list of unique directories that were changed in the latest commit."
runs:
  using: composite
  steps:
    - name: Get changed directories
      shell: bash
      run: |
        projects_dir="projects"

        # 最新のコミットとその1つ前のコミットの差分を取得
        git diff --name-only HEAD HEAD~1 | \
        # 変更されたファイルがどのプロジェクトに属するかを確認
        awk -F/ '/^$projects_dir\// {print $2}' | \
        sort -u > changed_projects.txt

        ls -la
        cat changed_projects.txt
